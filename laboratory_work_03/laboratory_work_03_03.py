import math

def main():
    # Ввод данных
    print('Вычисление функции e^(-x) с помощью ряда Тейлора')
    xb = float(input('Xначальное = '))
    xe = float(input('Xконечное = '))
    dx = float(input('Шаг dx = '))
    eps = float(input('Точность ε = '))

    # Проверка корректности ввода
    if dx <= 0:
        print("Ошибка: шаг dx должен быть больше нуля!")
        return

    # Вывод шапки таблицы
    print("\n" + "=" * 50)
    print("Таблица значений функции e^(-x)")
    print("=" * 50)
    print("|{:^12}|{:^15}|{:^18}|".format("X", "e^(-x)", "Членов ряда"))
    print("=" * 50)

    # Основной цикл по X
    x = xb
    while x <= xe:
        # Инициализация переменных для ряда
        n = 0
        term = 1.0  # первый член ряда (n=0): (-1)^0 * x^0 / 0! = 1
        sum_series = term

        # Вычисление суммы ряда до достижения точности
        while abs(term) >= eps:
            n += 1
            # Вычисление следующего члена ряда: (-1)^n * x^n / n!
            term = ((-1) ** n) * (x ** n) / math.factorial(n)
            sum_series += term

            # Защита от бесконечного цикла
            if n > 1000:
                print(f"Предупреждение: для x={x} не достигнута точность за 1000 итераций")
                break

        # Вывод строки таблицы
        print("|{:12.4f}|{:15.8f}|{:18d}|".format(x, sum_series, n + 1))

        # Переход к следующему X
        x += dx

    print("=" * 50)

if __name__ == "__main__":
    main()